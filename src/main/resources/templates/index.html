<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Main page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="/css/tables.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <style>
        .loading {
            background-image: url('https://i.pinimg.com/originals/d4/52/da/d452daacda184e8b3463441c6943d9dd.gif');
            background-position: center;
            background-position-y: 5em;
            background-size: auto 10%;
            background-repeat: no-repeat;
        }

        tr:hover {
            cursor: pointer;
        }

        .red {
            color: #dc3646;
        }

        tbody > tr.highlight > td {
            border: solid 1.5px rgba(220, 54, 70, 0.6);
            box-shadow: inset 0 0 2px rgba(220, 54, 70);
        }

        .fix_height {
            height: 65vh;
        }
    </style>
</head>
<body>
<div class="container mt-2">
    <div class="row g-10">
        <div class="col-md">
            <h3>Clients</h3>
            <form action="/rest/clients" method="post" enctype="multipart/form-data" class="mb-2" id="client-form">
                <div class="row g-2">
                    <div class="col-md">
                        <div class="form-floating">
                            <input class="form-control" type="text" name="firstName" id="firstName"
                                   required>
                            <label for="firstName">First Name</label>
                        </div>
                    </div>
                    <div class="col-md">
                        <div class="form-floating">
                            <input class="form-control" type="text" name="lastName" id="lastName"
                                   required>
                            <label for="lastName">Last Name</label></div>

                    </div>
                    <div class="col-md">
                        <div class="form-floating">
                            <input class="form-control" type="number" min="0" step="10" name="balance" id="balance"
                                   required
                                   value="100">
                            <label for="balance">Balance</label>
                        </div>
                    </div>
                    <button class="btn btn-outline-secondary" type="button" id="submit-client" onclick="addClient()">Add
                        Client
                    </button>
                </div>
            </form>

            <div class="loading" style="max-height: 65vh; overflow: auto" id="clients-container">
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th>id</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Balance</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody id="clients-table">
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md">
            <h3>Products</h3>
            <form action="/rest/products" method="post" enctype="multipart/form-data" class="mb-2" id="product-form">
                <div class="row g-2">
                    <div class="col-md">
                        <div class="form-floating">
                            <input class="form-control" type="text" name="name" id="name"
                                   required>
                            <label for="name">Name</label>
                        </div>
                    </div>
                    <div class="col-md">
                        <div class="form-floating">
                            <input class="form-control" type="number" min="0" step="10" name="price" id="price"
                                   value="10" required>
                            <label for="price">Price</label>
                        </div>
                    </div>
                    <button class="btn btn-outline-secondary" type="button" id="submit-product" onclick="addProduct()">
                        Add Product
                    </button>
                </div>
            </form>
            <div class="loading" style="max-height: 65vh; overflow: auto" id="products-container">
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th>id</th>
                        <th>Name</th>
                        <th>Price</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody id="products-table">
                    </tbody>
                </table>
            </div>
        </div>

        <div class="input-group mt-2">
            <label class="input-group-text" for="client-select">Client:</label>
            <select class="form-select" id="client-select" required>
                <option selected>Choose...</option>
            </select>
            <label class="input-group-text" for="product-select">Product:</label>
            <select class="form-select" id="product-select" required>
                <option selected>Choose...</option>
            </select>
            <button class="btn btn-outline-info col-2" onclick="makePurchase()">Buy</button>
        </div>
        <div class="input-group mt-2">
            <button class="btn btn-outline-secondary col" onclick="displayAll()">Refresh and display all</button>
            <button class="btn btn-sm btn-outline-secondary col-2" onclick="fixTableLength()" id="fixing_button">Fix
                tables height
            </button>
        </div>
        <small>Click on a client [table row] to display products the client has. Click on product to display what
            clients
            have it. Click "Refresh and display all" button to show all clients and products that are in the
            system.</small>
    </div>
</div>


<script src="/js/index.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</body>
</html>